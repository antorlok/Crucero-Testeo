{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Compras Registradas</title>
    <link rel="stylesheet" href="{% static 'styles/styles_compras.css' %}">
</head>
<body>
    <div class="container">
        <h1>Compras Registradas</h1>
    <button onclick="window.location.href='{% url 'registrar_compra' %}'" style="margin-bottom: 16px;">Registrar Nueva Compra</button>
    <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Fecha</th>
                    <th>Estado</th>
                    <th>Proveedor</th>
                    <th>Material</th>
                    <th>Descripci√≥n</th>
                    <th>Unidad</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for compra in compras %}
                    {% for detalle in compra.detalles.all %}
                    <tr>
                        <td>{{ compra.id }}</td>
                        <td>{{ compra.fecha|date:"Y-m-d H:i" }}</td>
                        <td>{{ compra.get_estado_display }}</td>
                        <td>{{ detalle.proveedor.name }}</td>
                        <td>{{ detalle.material.nombre }}</td>
                        <td>{{ detalle.descripcion }}</td>
                        <td>{{ detalle.get_unidad_display }}</td>
                        <td>{{ detalle.cantidad }}</td>
                        <td>${{ detalle.precio_unitario }}</td>
                        <td>${{ detalle.total }}</td>
                    </tr>
                    {% endfor %}
                {% empty %}
                    <tr><td colspan="10">No hay compras registradas.</td></tr>
                {% endfor %}
            </tbody>
        </table>
        <button onclick="window.location.href='/'">Volver al Dashboard</button>
    </div>
</body>
</html>
